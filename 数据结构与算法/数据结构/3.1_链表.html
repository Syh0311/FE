<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body></body>
  <script>
    function LinkedList() {
      // 添加属性
      this.head = null;
      this.length = 0;
      // 封装内部类
      // function Node(data, next) {
      //   this.data = data
      //   this.next = next
      // }
      function Node(data) {
        this.data = data;
        this.next = null;
      }
      // 添加增删改查操作
      LinkedList.prototype.append = function (element) {
        let newNode = new Node(element);
        if (this.length == 0) {
          this.head = newNode;
        } else {
          let current = this.head;
          while (current.next) {
            current = current.next;
          }
          current.next = newNode;
        }
        this.length += 1; //这句话注释掉的话，head里只有最后一个，why？？？
      };
      LinkedList.prototype.insert = function (element, index) {
        if (index < 0 || index > this.length) {
          console.error("插入位置大于链表长度等其他错误！！");
          return "插入位置大于链表长度等其他错误！！";
        }
        let current = this.head; // index   1
        let newNode = new Node(element);
        // let i = 1
        if (index == 0) {
          newNode.next = current;
          this.head = newNode;
        } else {
          var i = 0;
          // // 第一种方法
          let previous = null;
          // while (i++ < index) { //同下
          for (let i = 0; i < index; i++) {
            previous = current;
            current = current.next;
            // console.log(previous);//只需前一个就行，先写查找的方法，这的previous就好理解了
          }
          newNode.next = current;
          previous.next = newNode;
          // // 另一种方法
          // var previous = null;
          // while (i++ < index) {
          //   console.log(i);
          //   previous = current;
          //   current = current.next;
          // }
          // newNode.next = current;
          // previous.next = newNode;
        }
        this.length += 1;
      };
      LinkedList.prototype.get = function (index) {
        let current = this.head;
        for (let i = 0; i < index + 1; i++) {
          data = current.data;
          current = current.next;
        }
        return data;
      };
      LinkedList.prototype.indexOf = function (element) {
        let current = this.head,
          i = 1;
        while (current.next) {
          if (current.data == element) {
            return `是第${i}个`;
          } else {
            console.warn("链表中无此数据！!");
            return "链表中无此数据！！";
          }
          current = current.next;
          i += 1;
        }
      };
      LinkedList.prototype.update = function (element, index) {
        // 1.先做判断
        // 2.替换
        let current = this.head,
          i = 0;
        while (i++ < index) {
          // previous = current
          current = current.next;
        }
        current.data = element;
      };
      LinkedList.prototype.removeAt = function (index) {
        // 大同小异
      };
      LinkedList.prototype.remove = function (element) {
        // 大同小异
      };
      LinkedList.prototype.isEmpty = function () {
        // 大同小异
      };
      LinkedList.prototype.size = function () {
        // 大同小异
      };
      LinkedList.prototype.toString = function () {
        let outPut = "";
        let current = this.head;
        outPut += current.data;
        while (current.next) {
          current = current.next;
          outPut += "-" + current.data;
        }
        return outPut;
      };
    }
    let ll = new LinkedList();
    console.log(ll.__proto__.constructor == LinkedList);
    console.log(LinkedList.prototype.constructor == LinkedList);
    ll.append("s");
    ll.append("y");
    ll.append("h");
    console.log(ll);
    // console.log(ll.toString());
    ll.insert("ss", 1);
    ll.insert("yy", 1);
    ll.insert("hh", 2);
    console.log(ll.toString());
    // ll.update('sss', 0)
    // console.log(ll.toString());
    console.log(ll.get(0));
    console.log(ll.get(2));
    console.log(ll.indexOf("sss"));
  </script>
</html>
